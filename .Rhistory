golem::detach_all_attached()
library(golem)
library(shiny)
source('./R/app_server.R')
source('./R/app_ui.R')
run_app()
source('./R/run_app.R')
run_app()
source('./R/app_ui.R')
run_app()
source('./R/app_server.R')
source('./R/app_ui.R')
source('./R/run_app.R')
run_app()
devtools::build(path ="~/Library/CloudStorage/OneDrive-purdue.edu/dataprevieweR")
install.packages(
pkgs = '~/Library/CloudStorage/OneDrive-purdue.edu/dataprevieweR/dataprevieweR_0.0.0.9000.tar.gz',
lib = .libPaths()[length(.libPaths())],
repos = NULL, # è¿™ä¸ªå‚æ•°ä¸€å®šè¦çš„
dependencies = T
)
# å°è¯•ç”¨åŒ…ç›´æ¥è¿è¡Œapp
shinyapptest::run_app()
install.packages("shinyapptest")
# å°è¯•ç”¨åŒ…ç›´æ¥è¿è¡Œapp
shinyapptest::run_app()
devtools::install()
# å°è¯•ç”¨åŒ…ç›´æ¥è¿è¡Œapp
shinyapptest::run_app()
# å°è¯•ç”¨åŒ…ç›´æ¥è¿è¡Œapp
dataprevieweR::run_app()
install.packages("automagic")
library(automagic)
installed.packages()[, "Package"]
"automagic" %in% installed.packages()[, "Package"]
install.packages("automagic")
# å®‰è£… devtoolsï¼ˆå¦‚æœªå®‰è£…ï¼‰
install.packages("devtools")
# å®‰è£…æ‰“åŒ…å¥½çš„ golem åŒ…
devtools::install_local("dataprevieweR_0.0.0.9000.tar.gz")
# è¿è¡Œåº”ç”¨
dataprevieweR::run_app()
# Function to check and install required packages
check_and_install_packages <- function(packages) {
for (pkg in packages) {
if (!requireNamespace(pkg, quietly = TRUE)) {
message(paste("Installing package:", pkg))
tryCatch({
install.packages(pkg, repos = "https://cran.rstudio.com/")
}, error = function(e) {
stop(paste("Failed to install package:", pkg, ". Error:", e$message))
})
}
library(pkg, character.only = TRUE)
}
}
# List of required packages
required_packages <- c("shiny", "DT", "dplyr", "ggplot2", "readr", "shinythemes", "tidyr")
# Call the function to ensure packages are installed
check_and_install_packages(required_packages)
run_app <- function(
onStart = NULL,
options = list(),
enableBookmarking = NULL,
uiPattern = "/",
...
) {
options(shiny.maxRequestSize = 2000 * 1024^2)
with_golem_options(
app = shinyApp(
ui = app_ui,
server = app_server,
onStart = onStart,
options = options,
enableBookmarking = enableBookmarking,
uiPattern = uiPattern
),
golem_opts = list(...)
)
}
devtools::build()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::check()
usethis::use_package("dplyr", type = "Imports")
usethis::use_package("ggplot2", type = "Imports")
usethis::use_package("magrittr", type = "Imports")
usethis::use_package("shinythemes", type = "Imports")
usethis::use_package("tidyr", type = "Imports")
usethis::use_package("readr", type = "Imports")
usethis::use_package("DT", type = "Imports")
usethis::use_package("golem", type = "Imports")
usethis::use_package("config", type = "Imports")
devtools::document()
devtools::check()
tools::showNonASCIIfile("R/app_ui.R")
tools::showNonASCIIfile("R/run_app.R")
file <- "R/app_ui.R"
x <- readLines(file, encoding = "UTF-8", warn = FALSE)
# A) æ›¿æ¢ emoji ä¸ Â±
x <- gsub("ğŸ—‚ï¸", "\\\\U0001F5C2\\\\U0000FE0F", x, fixed = TRUE)
x <- gsub("ğŸ“Š", "\\\\U0001F4CA", x, fixed = TRUE)
x <- gsub("Â±",  "\\\\u00B1", x, fixed = TRUE)
# B) æ›¿æ¢/æ¸…ç† CSS æ³¨é‡Šä¸­çš„ä¸­æ–‡ï¼ˆæŠŠå¸¸è§ä¸­æ–‡æ³¨é‡Šæ›¿æ¢ä¸ºè‹±æ–‡ï¼›éœ€è¦å¯ç»§ç»­æ·»åŠ æ˜ å°„ï¼‰
map <- c(
"ä¸»é¢˜" = "theme",
"é»‘è‰²ä¸­æ–‡æ–‡å­—" = "black text",
"èƒŒæ™¯ & å…¨å±€æ–‡å­—" = "background & global text",
"ç™½åº•" = "white background",
"é»‘å­—" = "black text",
"ä¾§è¾¹/é¢æ¿" = "sidebar/panel",
"æµ…ç°èƒŒæ™¯" = "light gray background",
"æŒ‰é’®" = "buttons",
"é€‰æ‹©å¡" = "selector cards",
"è¡¨æ ¼" = "table",
"è¾“å…¥æ¡†" = "inputs"
)
for (k in names(map)) {
x <- gsub(k, map[[k]], x, fixed = TRUE)
}
# ä¿é™©ï¼šæŠŠ CSS æ³¨é‡Šé‡Œä»»ä½•å‰©ä½™é ASCII æ¸…æ‰ï¼ˆä»…é™ /* ... */ ä¸­ï¼‰
# è¿™ä¸ªå¤„ç†è¾ƒç²—ç³™ï¼šä»…åˆ é™¤æ³¨é‡Šå†…çš„é ASCII å­—ç¬¦ï¼Œä¸æ”¹åˆ«å¤„
non_ascii <- function(s) intToUtf8(utf8ToInt(s)[utf8ToInt(s) <= 127], multiple = TRUE)
in_comment <- FALSE
for (i in seq_along(x)) {
line <- x[i]
if (grepl("/\\*", line)) in_comment <- TRUE
if (in_comment) {
x[i] <- gsub("/\\*.*?\\*/", function(m) {  # å•è¡Œæ³¨é‡Šå—
paste0("/* ", non_ascii(sub("^/\\*|\\*/$", "", m)), " */")
}, line)
if (in_comment && grepl("\\*/", line)) in_comment <- FALSE
if (in_comment) x[i] <- non_ascii(line)  # æ³¨é‡Šå—å†…é€è¡Œæ¸…ç†é ASCII
}
}
# å†æ£€è§†ä¸€æ¬¡
tools::showNonASCIIfile(file)
file <- "R/app_ui.R"
x <- readLines(file, encoding = "UTF-8", warn = FALSE)
# A) æ›¿æ¢ emoji ä¸ Â±
x <- gsub("ğŸ—‚ï¸", "\\\\U0001F5C2\\\\U0000FE0F", x, fixed = TRUE)
x <- gsub("ğŸ“Š", "\\\\U0001F4CA", x, fixed = TRUE)
x <- gsub("Â±",  "\\\\u00B1", x, fixed = TRUE)
# B) æ›¿æ¢/æ¸…ç† CSS æ³¨é‡Šä¸­çš„ä¸­æ–‡ï¼ˆæŠŠå¸¸è§ä¸­æ–‡æ³¨é‡Šæ›¿æ¢ä¸ºè‹±æ–‡ï¼›éœ€è¦å¯ç»§ç»­æ·»åŠ æ˜ å°„ï¼‰
map <- c(
"ä¸»é¢˜" = "theme",
"é»‘è‰²ä¸­æ–‡æ–‡å­—" = "black text",
"èƒŒæ™¯ & å…¨å±€æ–‡å­—" = "background & global text",
"ç™½åº•" = "white background",
"é»‘å­—" = "black text",
"ä¾§è¾¹/é¢æ¿" = "sidebar/panel",
"æµ…ç°èƒŒæ™¯" = "light gray background",
"æŒ‰é’®" = "buttons",
"é€‰æ‹©å¡" = "selector cards",
"è¡¨æ ¼" = "table",
"è¾“å…¥æ¡†" = "inputs"
)
for (k in names(map)) {
x <- gsub(k, map[[k]], x, fixed = TRUE)
}
# ä¿é™©ï¼šæŠŠ CSS æ³¨é‡Šé‡Œä»»ä½•å‰©ä½™é ASCII æ¸…æ‰ï¼ˆä»…é™ /* ... */ ä¸­ï¼‰
# è¿™ä¸ªå¤„ç†è¾ƒç²—ç³™ï¼šä»…åˆ é™¤æ³¨é‡Šå†…çš„é ASCII å­—ç¬¦ï¼Œä¸æ”¹åˆ«å¤„
non_ascii <- function(s) intToUtf8(utf8ToInt(s)[utf8ToInt(s) <= 127], multiple = TRUE)
in_comment <- FALSE
for (i in seq_along(x)) {
line <- x[i]
if (grepl("/\\*", line)) in_comment <- TRUE
if (in_comment) {
x[i] <- gsub("/\\*.*?\\*/", function(m) {  # å•è¡Œæ³¨é‡Šå—
paste0("/* ", non_ascii(sub("^/\\*|\\*/$", "", m)), " */")
}, line)
if (in_comment && grepl("\\*/", line)) in_comment <- FALSE
if (in_comment) x[i] <- non_ascii(line)  # æ³¨é‡Šå—å†…é€è¡Œæ¸…ç†é ASCII
}
}
writeLines(x, file, useBytes = TRUE)
# å†æ£€è§†ä¸€æ¬¡
tools::showNonASCIIfile(file)
# å†æ£€è§†ä¸€æ¬¡
tools::showNonASCIIfile(file)
# å†æ£€è§†ä¸€æ¬¡
tools::showNonASCIIfile(file)
devtools::document()
devtools::document()
devtools::check()
devtools::document()
devtools::document()
devtools::check()
file.show(logfile[length(logfile)])
file.show(logfile[length(logfile)])
# çœ‹å…·ä½“æ˜¯å“ªä¸€ä¸ª Rd æŠ¥è­¦
logfile <- list.files("..", pattern = "00check.log", recursive = TRUE, full.names = TRUE)
unlink("man", recursive = TRUE)
devtools::document()
devtools::check()
run_app()
unlink("man", recursive = TRUE)
devtools::document()
devtools::check()
run_app()
unlink("man", recursive = TRUE)
devtools::document()
devtools::check()
tools::showNonASCIIfile("R/app_ui.R")
tools::showNonASCIIfile("R/app_ui.R")
tools::showNonASCIIfile("R/run_app.R")
devtools::document()
tools::showNonASCIIfile("R/app_ui.R")
tools::showNonASCIIfile("R/run_app.R")
devtools::document()
devtools::check()
tools::showNonASCIIfile("R/app_ui.R")
tools::showNonASCIIfile("R/run_app.R")
devtools::document()
tools::showNonASCIIfile("R/app_ui.R")
tools::showNonASCIIfile("R/run_app.R")
devtools::document()
devtools::check()
tools::showNonASCIIfile("R/app_ui.R")
tools::showNonASCIIfile("R/run_app.R")
devtools::document()
devtools::check()
run_app()
tools::showNonASCIIfile("R/app_ui.R")
tools::showNonASCIIfile("R/run_app.R")
devtools::document()
devtools::check()
run_app()
devtool::build()
library(devtool)
library(devtools)
devtools::build()
run_app()
run_app()
run_app()
run_app()
tools::showNonASCIIfile("R/app_ui.R")
tools::showNonASCIIfile("R/run_app.R")
devtools::document()
devtools::check()
tools::showNonASCIIfile("R/app_ui.R")
tools::showNonASCIIfile("R/run_app.R")
devtools::document()
devtools::check()
usethis::use_build_ignore(".github")
tools::showNonASCIIfile("R/app_ui.R")
tools::showNonASCIIfile("R/run_app.R")
devtools::document()
devtools::check()
ls("package:dataprevieweR", all.names = TRUE)
ls("package:dataprevieweR")
run_app()
devtools::build()
if (!requireNamespace("remotes", quietly = TRUE)) install.packages("remotes")
remotes::install_github("Thymine2001/dataprevieweR")
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
devtools::load_all()
devtools::load_all()
devtools::load_all()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
devtools::load_all()
run_app()
tools::showNonASCIIfile("R/app_server.R")
tools::showNonASCIIfile("R/get_label.R")
devtools::document()
devtools::document()
devtools::check()
convert_to_unicode <- function(file_path) {
lines <- readLines(file_path, encoding = "UTF-8", warn = FALSE)
convert_line <- function(line) {
paste0(
sapply(strsplit(line, "")[[1]], function(char) {
if (any(charToRaw(char) > as.raw(127))) {
sprintf("\\u%04x", utf8ToInt(char))
} else {
char
}
}),
collapse = ""
)
}
new_lines <- vapply(lines, convert_line, character(1))
writeLines(new_lines, file_path, useBytes = TRUE)
message("âœ… Converted non-ASCII characters in ", file_path)
}
# ä½¿ç”¨ç¤ºä¾‹
convert_to_unicode("R/app_server.R")
convert_to_unicode("R/get_label.R")
tools::showNonASCIIfile("R/app_server.R")
tools::showNonASCIIfile("R/get_label.R")
devtools::document()
devtools::document()
devtools::document()
devtools::check()
devtools::document()
devtools::check()
devtools::install()
run_app()
